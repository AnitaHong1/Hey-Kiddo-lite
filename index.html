<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hey Kiddo</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #fbfbff;
      color: #222e50;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
      margin: 0;
      padding: 1rem;
    }
    .chat-container {
      background: #ffffff;
      border: 2px solid #44bba4;
      border-radius: 12px;
      padding: 1rem;
      max-width: 400px;
      width: 100%;
      display: flex;
      flex-direction: column;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }
    .chat-box {
      flex-grow: 1;
      overflow-y: auto;
      margin-bottom: 1rem;
      max-height: 400px;
      display: flex;
      flex-direction: column;
    }
    .message-bubble {
      padding: 0.7rem 1rem;
      margin: 0.4rem;
      border-radius: 16px;
      max-width: 75%;
      font-size: 1rem;
      display: inline-block;
    }
    .user {
      align-self: flex-end;
      background-color: #5aa9e6;
      color: white;
      border-bottom-right-radius: 0;
    }
    .bot {
      align-self: flex-start;
      background-color: #d3cdd1;
      border-bottom-left-radius: 0;
    }
    .input-area {
      display: flex;
      gap: 0.5rem;
    }
    input, button {
      font-size: 1rem;
      padding: 0.5rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    input {
      flex-grow: 1;
    }
    button {
      background-color: #44bba4;
      color: white;
      border: none;
      cursor: pointer;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <div id="setup">
      <p>Who do you want to talk to?</p>
      <input type="text" id="persona" placeholder="mom, dad, fairy godmother..." />
      <button onclick="startChat()">Start Chat</button>
    </div>

    <div id="chat-ui" class="hidden">
      <div class="chat-box" id="chat"></div>
      <div class="input-area">
        <input type="text" id="userInput" placeholder="Type a message..." onkeydown="if(event.key === 'Enter'){sendMessage()}" />
        <button onclick="sendMessage()">Send</button>
      </div>
    </div>
  </div>

  <script>
    const messages = {
      mom: ["Make sure to eat something today, okay?"],
      dad: ["You’ve got this. One step at a time."],
      fairy: ["Magic doesn’t need to be loud to be real."],
      auntie: ["You shine even when you feel messy."]
    };

    const fallbackMessages = [
      "I’ve been thinking about you. I’m glad you’re here.",
      "No pressure to be okay right now.",
      "Let’s just sit together for a minute.",
      "You’re allowed to not know what you need yet.",
      "What you feel is real.",
      "I’m proud of how you’ve kept going.",
      "You don’t have to explain yourself to be loved.",
      "I know it’s been heavy lately. You’re doing your best.",
      "It’s okay to let someone care about you.",
      "I’m not going anywhere.",
      "You're not a burden.",
      "I believe in you. Even when you're tired.",
      "Rest. That’s part of the healing too.",
      "You're not alone, even if it feels that way.",
      "The world is better with you in it.",
      "What if you stopped trying to fix everything right now?",
      "I miss the way you smile when you're comfortable.",
      "I don’t need you to perform. I just like being with you.",
      "You don’t need to earn rest.",
      "You’ve survived every hard day so far.",
      "I hope you’re gentle with yourself today.",
      "You're still lovable, even when you're quiet.",
      "I see your heart, even when you try to hide it.",
      "You don’t have to do this alone.",
      "There’s no wrong way to be human."
    ];

    let activePersona = null;
    let customName = null;

    function startChat() {
      let inputName = document.getElementById('persona').value.trim();
      let persona = inputName.toLowerCase();

      if (persona.includes("fairy")) persona = "fairy";
      else if (persona.includes("mom")) persona = "mom";
      else if (persona.includes("dad")) persona = "dad";
      else if (persona.includes("aunt")) persona = "auntie";
      else persona = "fallback";

      activePersona = persona;
      customName = inputName;

      document.getElementById('setup').classList.add('hidden');
      document.getElementById('chat-ui').classList.remove('hidden');

      appendMessage(`You're now chatting with ${customName}.`, 'bot');
    }

    function appendMessage(content, type) {
      const chat = document.getElementById('chat');
      const msg = document.createElement('div');
      msg.classList.add('message-bubble', type);
      msg.textContent = content;
      chat.appendChild(msg);
      chat.scrollTop = chat.scrollHeight;
    }

    function sendMessage() {
      const input = document.getElementById('userInput');
      const userText = input.value.trim();
      if (!userText) return;

      appendMessage(userText, 'user');
      input.value = '';

      let list = activePersona === 'fallback' ? fallbackMessages : messages[activePersona];
      const message = list[Math.floor(Math.random() * list.length)];

      setTimeout(() => {
        appendMessage(message, 'bot');
      }, 700);
    }
  </script>
</body>
</html>
